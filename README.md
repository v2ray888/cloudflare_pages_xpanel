# XPanel - VPNé”€å”®ç®¡ç†ç³»ç»Ÿ

ä¸€ä¸ªåŸºäº Cloudflare Pages + D1 çš„ç°ä»£åŒ– VPN é”€å”®ç®¡ç†ç³»ç»Ÿï¼Œæä¾›å®Œæ•´çš„ç”¨æˆ·ç®¡ç†ã€å¥—é¤é”€å”®ã€æ¨å¹¿åˆ†é”€ç­‰åŠŸèƒ½ã€‚

## âœ¨ åŠŸèƒ½ç‰¹è‰²

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½
- **å¤šæ ·åŒ–å¥—é¤ç³»ç»Ÿ** - åŒ…æœˆ/åŒ…å­£/åŠå¹´/åŒ…å¹´/è‡ªå®šä¹‰å¥—é¤
- **å®Œæ•´ç”¨æˆ·ç³»ç»Ÿ** - æ³¨å†Œç™»å½•ã€ç”¨æˆ·ä¸­å¿ƒã€è®¢é˜…ç®¡ç†
- **å…‘æ¢ç ç³»ç»Ÿ** - å…æ³¨å†Œå…‘æ¢åŠŸèƒ½ï¼Œæ‰¹é‡ç”Ÿæˆç®¡ç†
- **æ¨å¹¿åˆ†é”€ç³»ç»Ÿ** - å¤šçº§ä½£é‡‘ã€æ¨å¹¿ç»Ÿè®¡
- **èŠ‚ç‚¹APIç®¡ç†** - æ”¯æŒå¤šåè®®èŠ‚ç‚¹æ·»åŠ 
- **åŒç«¯ç®¡ç†** - ç”¨æˆ·å‰å° + ç®¡ç†å‘˜åå°

### ğŸ›¡ï¸ å®‰å…¨ç‰¹æ€§
- JWT èº«ä»½è®¤è¯
- å¯†ç åŠ å¯†å­˜å‚¨
- API æƒé™æ§åˆ¶
- æ”¯ä»˜å®‰å…¨ä¿éšœ

### ğŸ¨ UI/UX è®¾è®¡
- å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒç§»åŠ¨ç«¯
- ç°ä»£åŒ– UI ç»„ä»¶
- æµç•…çš„ç”¨æˆ·ä½“éªŒ
- æ·±è‰²/æµ…è‰²ä¸»é¢˜æ”¯æŒ

## ğŸš€ æŠ€æœ¯æ ˆ

### å‰ç«¯
- **React 18** - ç°ä»£åŒ–å‰ç«¯æ¡†æ¶
- **TypeScript** - ç±»å‹å®‰å…¨
- **Tailwind CSS** - åŸå­åŒ–CSSæ¡†æ¶
- **React Router** - è·¯ç”±ç®¡ç†
- **React Query** - æ•°æ®çŠ¶æ€ç®¡ç†
- **React Hook Form** - è¡¨å•å¤„ç†
- **Zod** - æ•°æ®éªŒè¯

### åç«¯
- **Cloudflare Workers** - è¾¹ç¼˜è®¡ç®—
- **Hono.js** - è½»é‡çº§Webæ¡†æ¶
- **Cloudflare D1** - SQLiteæ•°æ®åº“
- **JWT** - èº«ä»½è®¤è¯
- **bcryptjs** - å¯†ç åŠ å¯†

### éƒ¨ç½²
- **Cloudflare Pages** - é™æ€ç½‘ç«™æ‰˜ç®¡
- **Wrangler** - Cloudflareå¼€å‘å·¥å…·

## ğŸ“¦ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js 18+
- npm æˆ– yarn
- Cloudflare è´¦æˆ·

### 1. å…‹éš†é¡¹ç›®
```bash
git clone <repository-url>
cd cloudflare-xpanel
```

### 2. å®‰è£…ä¾èµ–
```bash
npm install
```

### 3. ç¯å¢ƒé…ç½®
```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ–‡ä»¶
cp .env.example .env

# ç¼–è¾‘ç¯å¢ƒå˜é‡
vim .env
```

### 4. æ•°æ®åº“åˆå§‹åŒ–
```bash
# åˆ›å»º D1 æ•°æ®åº“
npx wrangler d1 create xpanel-db

# æ›´æ–° wrangler.toml ä¸­çš„æ•°æ®åº“ID

# æ‰§è¡Œæ•°æ®åº“è¿ç§»
npx wrangler d1 execute xpanel-db --file=./database/schema.sql
npx wrangler d1 execute xpanel-db --file=./database/seed.sql
```

### 5. æœ¬åœ°å¼€å‘
```bash
# å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
npm run dev

# å¯åŠ¨åç«¯å¼€å‘æœåŠ¡å™¨ï¼ˆæ–°ç»ˆç«¯ï¼‰
npm run dev:api
```

### 6. éƒ¨ç½²åˆ° Cloudflare
```bash
# éƒ¨ç½² Workers API
npm run deploy:api

# éƒ¨ç½² Pages å‰ç«¯
npm run deploy
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
cloudflare-xpanel/
â”œâ”€â”€ src/                    # å‰ç«¯æºç 
â”‚   â”œâ”€â”€ components/         # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ui/            # UI åŸºç¡€ç»„ä»¶
â”‚   â”‚   â””â”€â”€ layout/        # å¸ƒå±€ç»„ä»¶
â”‚   â”œâ”€â”€ pages/             # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ user/          # ç”¨æˆ·ä¸­å¿ƒé¡µé¢
â”‚   â”‚   â””â”€â”€ admin/         # ç®¡ç†åå°é¡µé¢
â”‚   â”œâ”€â”€ contexts/          # React Context
â”‚   â”œâ”€â”€ lib/               # å·¥å…·åº“
â”‚   â”œâ”€â”€ types/             # TypeScript ç±»å‹
â”‚   â””â”€â”€ layouts/           # é¡µé¢å¸ƒå±€
â”œâ”€â”€ functions/             # Cloudflare Workers
â”‚   â””â”€â”€ api/               # API è·¯ç”±
â”‚       â”œâ”€â”€ routes/        # è·¯ç”±å¤„ç†
â”‚       â””â”€â”€ utils/         # å·¥å…·å‡½æ•°
â”œâ”€â”€ database/              # æ•°æ®åº“æ–‡ä»¶
â”‚   â”œâ”€â”€ schema.sql         # æ•°æ®åº“ç»“æ„
â”‚   â””â”€â”€ seed.sql           # åˆå§‹æ•°æ®
â”œâ”€â”€ public/                # é™æ€èµ„æº
â””â”€â”€ docs/                  # æ–‡æ¡£
```

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡

### æ ¸å¿ƒæ•°æ®è¡¨
- `users` - ç”¨æˆ·ä¿¡æ¯
- `plans` - å¥—é¤ç®¡ç†
- `orders` - è®¢å•è®°å½•
- `subscriptions` - è®¢é˜…ç®¡ç†
- `servers` - èŠ‚ç‚¹æœåŠ¡å™¨
- `redemption_codes` - å…‘æ¢ç 
- `referral_commissions` - æ¨å¹¿ä½£é‡‘
- `system_settings` - ç³»ç»Ÿè®¾ç½®

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡
```env
# API é…ç½®
VITE_API_URL=https://your-api.workers.dev
VITE_APP_NAME=XPanel

# Cloudflare Workers ç¯å¢ƒå˜é‡
JWT_SECRET=your-jwt-secret-key
PAYMENT_SECRET=your-payment-secret-key
```

### Wrangler é…ç½®
```toml
name = "cloudflare-xpanel"
compatibility_date = "2024-01-01"

[[d1_databases]]
binding = "DB"
database_name = "xpanel-db"
database_id = "your-database-id"
```

## ğŸ¯ åŠŸèƒ½æ¨¡å—

### ç”¨æˆ·å‰å°
- é¦–é¡µå±•ç¤º
- å¥—é¤é€‰è´­
- ç”¨æˆ·æ³¨å†Œ/ç™»å½•
- å…‘æ¢ç å…‘æ¢
- ç”¨æˆ·ä¸­å¿ƒ
  - ä»ªè¡¨æ¿
  - è®¢é˜…ç®¡ç†
  - èŠ‚ç‚¹åˆ—è¡¨
  - è®¢å•è®°å½•
  - æ¨å¹¿ä¸­å¿ƒ
  - ä¸ªäººè®¾ç½®

### ç®¡ç†åå°
- ä»ªè¡¨æ¿ç»Ÿè®¡
- ç”¨æˆ·ç®¡ç†
- å¥—é¤ç®¡ç†
- è®¢å•ç®¡ç†
- èŠ‚ç‚¹ç®¡ç†
- å…‘æ¢ç ç®¡ç†
- æ¨å¹¿ç®¡ç†
- è´¢åŠ¡ç®¡ç†
- ç³»ç»Ÿè®¾ç½®

## ğŸ” API æ¥å£

### è®¤è¯æ¥å£
- `POST /auth/register` - ç”¨æˆ·æ³¨å†Œ
- `POST /auth/login` - ç”¨æˆ·ç™»å½•
- `POST /auth/redeem` - å…‘æ¢ç å…‘æ¢
- `GET /auth/verify` - éªŒè¯Token

### ç”¨æˆ·æ¥å£
- `GET /api/users/profile` - è·å–ç”¨æˆ·ä¿¡æ¯
- `PUT /api/users/profile` - æ›´æ–°ç”¨æˆ·ä¿¡æ¯
- `PUT /api/users/password` - ä¿®æ”¹å¯†ç 
- `GET /api/users/subscription` - è·å–è®¢é˜…ä¿¡æ¯
- `GET /api/users/orders` - è·å–è®¢å•åˆ—è¡¨

### ç®¡ç†æ¥å£
- `GET /api/admin/stats` - è·å–ç»Ÿè®¡æ•°æ®
- `GET /api/admin/users` - ç”¨æˆ·ç®¡ç†
- `GET /api/admin/orders` - è®¢å•ç®¡ç†
- `POST /api/admin/redemption` - ç”Ÿæˆå…‘æ¢ç 

## ğŸ¨ UI ç»„ä»¶

### åŸºç¡€ç»„ä»¶
- Button - æŒ‰é’®ç»„ä»¶
- Input - è¾“å…¥æ¡†ç»„ä»¶
- Card - å¡ç‰‡ç»„ä»¶
- Modal - æ¨¡æ€æ¡†ç»„ä»¶
- Badge - æ ‡ç­¾ç»„ä»¶
- LoadingSpinner - åŠ è½½åŠ¨ç”»

### ä¸šåŠ¡ç»„ä»¶
- Header - é¡µé¢å¤´éƒ¨
- Footer - é¡µé¢åº•éƒ¨
- Sidebar - ä¾§è¾¹æ 
- PlanCard - å¥—é¤å¡ç‰‡
- ServerList - èŠ‚ç‚¹åˆ—è¡¨

## ğŸš€ éƒ¨ç½²æŒ‡å—

### Cloudflare Pages éƒ¨ç½²
1. è¿æ¥ GitHub ä»“åº“
2. è®¾ç½®æ„å»ºå‘½ä»¤ï¼š`npm run build`
3. è®¾ç½®è¾“å‡ºç›®å½•ï¼š`dist`
4. é…ç½®ç¯å¢ƒå˜é‡

### Cloudflare Workers éƒ¨ç½²
1. é…ç½® wrangler.toml
2. è®¾ç½®ç¯å¢ƒå˜é‡
3. æ‰§è¡Œéƒ¨ç½²å‘½ä»¤ï¼š`npm run deploy:api`

### åŸŸåé…ç½®
1. æ·»åŠ è‡ªå®šä¹‰åŸŸå
2. é…ç½® DNS è®°å½•
3. å¯ç”¨ SSL è¯ä¹¦

## ğŸ”§ å¼€å‘æŒ‡å—

### ä»£ç è§„èŒƒ
- ä½¿ç”¨ TypeScript è¿›è¡Œç±»å‹æ£€æŸ¥
- éµå¾ª ESLint ä»£ç è§„èŒƒ
- ä½¿ç”¨ Prettier æ ¼å¼åŒ–ä»£ç 
- ç»„ä»¶é‡‡ç”¨å‡½æ•°å¼ç¼–ç¨‹

### æäº¤è§„èŒƒ
- feat: æ–°åŠŸèƒ½
- fix: ä¿®å¤bug
- docs: æ–‡æ¡£æ›´æ–°
- style: ä»£ç æ ¼å¼
- refactor: é‡æ„ä»£ç 
- test: æµ‹è¯•ç›¸å…³
- chore: æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (2024-01-01)
- ğŸ‰ é¡¹ç›®åˆå§‹åŒ–
- âœ¨ å®Œæˆç”¨æˆ·ç³»ç»Ÿ
- âœ¨ å®Œæˆå¥—é¤ç®¡ç†
- âœ¨ å®Œæˆè®¢å•ç³»ç»Ÿ
- âœ¨ å®Œæˆæ¨å¹¿ç³»ç»Ÿ
- âœ¨ å®Œæˆç®¡ç†åå°
- ğŸ¨ å®ŒæˆUIè®¾è®¡

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤ä»£ç 
4. åˆ›å»º Pull Request

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ†˜ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æäº¤ Issue æˆ–è”ç³»å¼€å‘è€…ã€‚

---

**XPanel** - è®©VPNé”€å”®ç®¡ç†æ›´ç®€å• ğŸš€