# Cloudflare Pages éƒ¨ç½²é…ç½®æŒ‡å—

## ğŸš€ ç¬¬ä¸€æ­¥ï¼šé€‰æ‹©å­˜å‚¨åº“

### 1. è®¿é—®Cloudflare Pages
- ç™»å½• [Cloudflare Dashboard](https://dash.cloudflare.com)
- åœ¨å·¦ä¾§èœå•é€‰æ‹© **"Pages"**
- ç‚¹å‡» **"Connect to Git"** æŒ‰é’®

### 2. è¿æ¥GitHub
- é€‰æ‹© **"GitHub"** ä½œä¸ºGitæä¾›å•†
- å¦‚æœé¦–æ¬¡ä½¿ç”¨ï¼Œéœ€è¦æˆæƒCloudflareè®¿é—®æ‚¨çš„GitHubè´¦æˆ·
- ç‚¹å‡» **"Install & Authorize"**

### 3. é€‰æ‹©ä»“åº“
- åœ¨ä»“åº“åˆ—è¡¨ä¸­æ‰¾åˆ°ï¼š**`v2ray888/cloudflare_pages_xpanel`**
- ç‚¹å‡»ä»“åº“åç§°é€‰æ‹©å®ƒ
- ç‚¹å‡» **"Begin setup"**

---

## âš™ï¸ ç¬¬äºŒæ­¥ï¼šè®¾ç½®æ„å»ºå’Œéƒ¨ç½²

### æ„å»ºé…ç½®è®¾ç½®
è¯·æŒ‰ä»¥ä¸‹é…ç½®å¡«å†™ï¼š

```
é¡¹ç›®åç§°: xpanel
ç”Ÿäº§åˆ†æ”¯: main
```

### æ„å»ºè®¾ç½®
```
Framework preset: Vite
Build command: npm run build
Build output directory: dist
Root directory: / (ä¿æŒé»˜è®¤)
```

### ç¯å¢ƒå˜é‡è®¾ç½®
ç‚¹å‡» **"Environment variables"** å±•å¼€ï¼Œæ·»åŠ ä»¥ä¸‹å˜é‡ï¼š

```
VITE_API_URL = https://xpanel.pages.dev/api
VITE_APP_NAME = XPanel
VITE_APP_DESCRIPTION = ä¸“ä¸šçš„VPNæœåŠ¡å¹³å°
```

**æ³¨æ„ï¼š** `VITE_API_URL` ä¸­çš„åŸŸåä¼šåœ¨éƒ¨ç½²åè‡ªåŠ¨åˆ†é…ï¼Œæ‚¨å¯ä»¥ç¨åæ›´æ–°ä¸ºå®é™…åŸŸåã€‚

### é«˜çº§è®¾ç½®ï¼ˆå¯é€‰ï¼‰
- **Node.jsç‰ˆæœ¬**: 18 (æ¨è)
- **å…¼å®¹æ€§æ—¥æœŸ**: 2024-01-01
- **å…¼å®¹æ€§æ ‡å¿—**: ä¿æŒé»˜è®¤

---

## ğŸš€ ç¬¬ä¸‰æ­¥ï¼šéƒ¨ç½²ç«™ç‚¹

### 1. å¼€å§‹éƒ¨ç½²
- æ£€æŸ¥æ‰€æœ‰é…ç½®æ— è¯¯å
- ç‚¹å‡» **"Save and Deploy"** æŒ‰é’®
- ç³»ç»Ÿå°†å¼€å§‹æ„å»ºå’Œéƒ¨ç½²è¿‡ç¨‹

### 2. ç›‘æ§éƒ¨ç½²è¿›åº¦
éƒ¨ç½²è¿‡ç¨‹åŒ…æ‹¬ä»¥ä¸‹æ­¥éª¤ï¼š
1. **å…‹éš†ä»“åº“** - ä»GitHubè·å–ä»£ç 
2. **å®‰è£…ä¾èµ–** - è¿è¡Œ `npm install`
3. **æ„å»ºé¡¹ç›®** - è¿è¡Œ `npm run build`
4. **éƒ¨ç½²åˆ°è¾¹ç¼˜** - åˆ†å‘åˆ°å…¨çƒCDNèŠ‚ç‚¹

### 3. éƒ¨ç½²çŠ¶æ€
- âœ… **æˆåŠŸ**: ç»¿è‰²å‹¾å·ï¼Œç«™ç‚¹å¯è®¿é—®
- â³ **è¿›è¡Œä¸­**: é»„è‰²åœ†åœˆï¼Œæ­£åœ¨æ„å»º
- âŒ **å¤±è´¥**: çº¢è‰²å‰å·ï¼Œéœ€è¦æ£€æŸ¥æ—¥å¿—

---

## ğŸ”§ éƒ¨ç½²åé…ç½®

### 1. è·å–ç«™ç‚¹URL
éƒ¨ç½²æˆåŠŸåï¼Œæ‚¨å°†è·å¾—ï¼š
- **ä¸´æ—¶åŸŸå**: `https://xpanel-xxx.pages.dev`
- **è‡ªå®šä¹‰åŸŸå**: å¯åœ¨è®¾ç½®ä¸­æ·»åŠ 

### 2. é…ç½®D1æ•°æ®åº“ç»‘å®š

#### åˆ›å»ºD1æ•°æ®åº“
```bash
# å®‰è£…Wrangler CLI
npm install -g wrangler

# ç™»å½•Cloudflare
wrangler login

# åˆ›å»ºæ•°æ®åº“
wrangler d1 create xpanel-db
```

#### ç»‘å®šæ•°æ®åº“åˆ°Pages
1. åœ¨Pagesé¡¹ç›®è®¾ç½®ä¸­
2. è¿›å…¥ **"Functions"** æ ‡ç­¾
3. ç‚¹å‡» **"D1 database bindings"**
4. æ·»åŠ ç»‘å®šï¼š
   - **Variable name**: `DB`
   - **D1 database**: é€‰æ‹© `xpanel-db`

#### åˆå§‹åŒ–æ•°æ®åº“
```bash
# æ‰§è¡Œæ•°æ®åº“ç»“æ„
wrangler d1 execute xpanel-db --file=./database/schema.sql

# æ‰§è¡Œåˆå§‹æ•°æ®
wrangler d1 execute xpanel-db --file=./database/seed.sql
```

### 3. æ›´æ–°ç¯å¢ƒå˜é‡
è·å¾—å®é™…åŸŸååï¼Œæ›´æ–°ç¯å¢ƒå˜é‡ï¼š
```
VITE_API_URL = https://your-actual-domain.pages.dev/api
```

---

## ğŸ¯ éªŒè¯éƒ¨ç½²

### 1. è®¿é—®ç½‘ç«™
- æ‰“å¼€åˆ†é…çš„åŸŸå
- æ£€æŸ¥é¦–é¡µæ˜¯å¦æ­£å¸¸æ˜¾ç¤º
- æµ‹è¯•ç”¨æˆ·æ³¨å†Œ/ç™»å½•åŠŸèƒ½

### 2. æµ‹è¯•API
```bash
# å¥åº·æ£€æŸ¥
curl https://your-domain.pages.dev/api/health

# æµ‹è¯•è®¤è¯
curl -X POST https://your-domain.pages.dev/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{"email":"test@example.com","password":"123456","username":"testuser"}'
```

### 3. æ£€æŸ¥åŠŸèƒ½
- âœ… ç”¨æˆ·æ³¨å†Œ/ç™»å½•
- âœ… å¥—é¤å±•ç¤º
- âœ… å…‘æ¢ç åŠŸèƒ½
- âœ… ç”¨æˆ·ä¸­å¿ƒ
- âœ… ç®¡ç†åå°

---

## ğŸš¨ å¸¸è§é—®é¢˜è§£å†³

### æ„å»ºå¤±è´¥
**é—®é¢˜**: Build failed with exit code 1
**è§£å†³**:
1. æ£€æŸ¥ `package.json` ä¸­çš„ä¾èµ–
2. ç¡®è®¤Node.jsç‰ˆæœ¬å…¼å®¹æ€§
3. æŸ¥çœ‹æ„å»ºæ—¥å¿—è¯¦ç»†é”™è¯¯

### APIè¿æ¥å¤±è´¥
**é—®é¢˜**: APIè¯·æ±‚è¿”å›404
**è§£å†³**:
1. ç¡®è®¤Functionså·²æ­£ç¡®éƒ¨ç½²
2. æ£€æŸ¥ `_routes.json` é…ç½®
3. éªŒè¯D1æ•°æ®åº“ç»‘å®š

### æ•°æ®åº“è¿æ¥é”™è¯¯
**é—®é¢˜**: Database binding not found
**è§£å†³**:
1. ç¡®è®¤D1æ•°æ®åº“å·²åˆ›å»º
2. æ£€æŸ¥ç»‘å®šé…ç½®æ˜¯å¦æ­£ç¡®
3. é‡æ–°éƒ¨ç½²Functions

---

## ğŸ“Š éƒ¨ç½²å®Œæˆæ£€æŸ¥æ¸…å•

- [ ] GitHubä»“åº“å·²è¿æ¥
- [ ] æ„å»ºé…ç½®æ­£ç¡®
- [ ] ç¯å¢ƒå˜é‡å·²è®¾ç½®
- [ ] ç«™ç‚¹éƒ¨ç½²æˆåŠŸ
- [ ] D1æ•°æ®åº“å·²åˆ›å»ºå¹¶ç»‘å®š
- [ ] æ•°æ®åº“å·²åˆå§‹åŒ–
- [ ] APIåŠŸèƒ½æ­£å¸¸
- [ ] å‰ç«¯é¡µé¢å¯è®¿é—®
- [ ] ç”¨æˆ·åŠŸèƒ½æµ‹è¯•é€šè¿‡
- [ ] ç®¡ç†åŠŸèƒ½æµ‹è¯•é€šè¿‡

---

## ğŸ‰ æ­å–œï¼

æ‚¨çš„VPNé”€å”®ç³»ç»Ÿå·²æˆåŠŸéƒ¨ç½²åˆ°Cloudflare Pagesï¼

**è®¿é—®åœ°å€**: https://your-domain.pages.dev
**ç®¡ç†åå°**: https://your-domain.pages.dev/admin
**ç”¨æˆ·ä¸­å¿ƒ**: https://your-domain.pages.dev/user

äº«å—å…¨çƒCDNåŠ é€Ÿã€DDoSé˜²æŠ¤å’Œ99.9%å¯ç”¨æ€§ä¿éšœï¼ğŸš€

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. [Cloudflare Pagesæ–‡æ¡£](https://developers.cloudflare.com/pages/)
2. [GitHub Actionsæ—¥å¿—](https://github.com/v2ray888/cloudflare_pages_xpanel/actions)
3. Cloudflare Pageséƒ¨ç½²æ—¥å¿—

ç¥æ‚¨ä¸šåŠ¡å…´éš†ï¼ğŸ’°